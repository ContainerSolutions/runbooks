<!doctype html><html><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-N2WWDBK5SV"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-N2WWDBK5SV')</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Pod In InvalidImageName State &ndash; Runbooks</title><meta name=description property="og:description" content="Pod In InvalidImageName State|"><meta name=apple-mobile-web-app-title content="Runbooks"><link rel=stylesheet href=/runbooks/assets/syntax.css><link rel=stylesheet href=/runbooks/assets/primer-build.css><link rel=stylesheet href=/runbooks/assets/style.css><link rel=stylesheet href=https://containersolutions.github.io/runbooks/custom_style.899dd13784115b34654e51c818307a0a.css></head><body class=bg-gray><div id=holy class="container-lg bg-white h-100"><div id=header class="px-1 bg-white"><nav class="UnderlineNav UnderlineNav--right px-2"><a class="UnderlineNav-actions muted-link h2" href=https://containersolutions.github.io/runbooks/>Runbooks</a><div class="pseudo-menu-item text-gray"><div class=pseudo-flex-item><span class=pseudo-nav-item><a href=https://github.com/containersolutions/runbooks/edit/master/content/posts/kubernetes/invalidimagename.md class=edit-link><svg aria-hidden="true" height="16" role="img" viewBox="0 0 14 16" width="14" class="pencil"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996.0 011.41.0l1.59 1.59c.39.39.39 1.02.0 1.41z"/></svg>&nbsp;
Improve this page</a></span></div></div><div class=UnderlineNav-body><div class="flex-column position-relative dropdown"><span class=UnderlineNav-item>Nav Menu</span><div class="Box Box--condensed position-absolute dropdown-content"><div class=Box-body><a href=/runbooks/>Home</a></div><div class=Box-body><a href=/runbooks/posts/kubernetes/>Kubernetes</a></div><div class=Box-body><a href=/runbooks/posts/linux/>Linux</a></div><div class=Box-body><a href=/runbooks/posts/networking/>Networking</a></div><div class=Box-body><a href=/runbooks/posts/python/>Python</a></div><div class=Box-body><a href=/runbooks/posts/how-to/>How-Tos</a></div><div class=Box-body><a href=/runbooks/posts/golang/>Go</a></div></div></div></div></nav></div><div role=main id=main class="holy-main markdown-body px-4 bg-white"><div class=Subhead><div class=Subhead-heading><div class="h1 mt-3 mb-1">Pod In InvalidImageName State</div></div><div class=Subhead-description><div class=float-md-right><span title="Lastmod: 2023-01-26. Published at: 0001-01-01.">Lastmod: 2023-01-26</span></div></div></div><article><section class="pb-6 mb-3 border-bottom"><h2 id=overview>Overview</h2><p>An <code>InvalidImageName</code> error occurs when kubelet attempts to pull a container image from the container registry and the image name reference is not correct.</p><h2 id=check-runbook-match>Check RunBook Match</h2><p>When running a <code>kubectl get pods</code> command, you will see a line like this in the output for your pod:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>NAME                     READY     STATUS             RESTARTS   AGE
nginx-7ef9efa7cd-qasd2   0/1       InvalidImageName   0          1m
</code></pre></div><h2 id=initial-steps-overview>Initial Steps Overview</h2><ol><li><p><a href=#step-1>Gather information</a></p></li><li><p><a href=#step-2>Examine <code>Events</code> section in describe output</a></p></li><li><p><a href=#step-3>Check the error message</a></p></li></ol><h2 id=detailed-steps>Detailed Steps</h2><h3 id=step-1>1) Gather information</h3><p>Run this commands to gather relevant information in one step:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl describe -n <span style=color:#f92672>[</span>NAMESPACE_NAME<span style=color:#f92672>]</span> pod <span style=color:#f92672>[</span>POD_NAME<span style=color:#f92672>]</span><span style=color:#e6db74>`</span> &gt; /tmp/runbooks_describe_pod.txt
</code></pre></div><h3 id=step-2>2) Examine <code>Events</code> section in describe output</h3><h4 id=21-invalid-reference-format>2.1) Invalid reference format</h4><p>If you see lines that look like:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Type     Reason         Age                   From               Message
----     ------         ----                  ----               -------
Normal   Scheduled      2m45s                 default-scheduler  Successfully assigned default/nginx-7ef9efa7cd-qasd2 to kind-control-plane
Warning  Failed         38s (x12 over 2m45s)  kubelet            Error: InvalidImageName
Warning  InspectFailed  24s (x13 over 2m45s)  kubelet            Failed to apply default image tag &#34;https://docker.io/nginx:latest&#34;: couldn&#39;t parse image reference &#34;https://docker.io/nginx:latest&#34;: invalid reference format
</code></pre></div><p>Then this indicates that the container image reference you have specified can&rsquo;t be parsed, therefore kubelet from the node the pod has been scheduled to can&rsquo;t pull the container image.</p><h2 id=solutions-list>Solutions List</h2><p>A) <a href=#solution-a>Review the image reference</a></p><h2 id=solutions-detail>Solutions Detail</h2><h3 id=solution-a>A) Add credentials</h3><p>Review the container image reference in your manifest. The container image has two parts, the image name and the image tag. You can include a container registry hostname and the port as well. Protocols like <code>http://</code>, <code>ssh://</code>, <code>docker://</code> are not allowed and can lead to this issue. The container image tag consists of lowercase and uppercase letters, digits, underscores, periods and dashes, any other symbol can cause this issue to appear.</p><h2 id=check-resolution>Check Resolution</h2><p>If the pod starts up with status <code>RUNNING</code> according to the output of <code>kubectl get pods</code>, then the issue has been resolved.</p><p>If there is a different status, then it may be that this issue is resolved, but a new issue has been revealed.</p><h2 id=further-steps>Further Steps</h2><p>None</p><h2 id=further-information>Further Information</h2><p><a href=https://kubernetes.io/docs/concepts/containers/images/#image-names>Image names documentation</a></p><h2 id=owner>Owner</h2><p><a href=https://github.com/carvido1>Carlos Vicent Domenech</a></p></section><section><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//runbooks.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></article></div><div id=side class="pr-1 bg-white"><aside class=pr-3><div id=toc class="Box Box--blue mb-3"><b>Pod In InvalidImageName State</b><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#check-runbook-match>Check RunBook Match</a></li><li><a href=#initial-steps-overview>Initial Steps Overview</a></li><li><a href=#detailed-steps>Detailed Steps</a><ul><li><a href=#step-1>1) Gather information</a></li><li><a href=#step-2>2) Examine <code>Events</code> section in describe output</a></li></ul></li><li><a href=#solutions-list>Solutions List</a></li><li><a href=#solutions-detail>Solutions Detail</a><ul><li><a href=#solution-a>A) Add credentials</a></li></ul></li><li><a href=#check-resolution>Check Resolution</a></li><li><a href=#further-steps>Further Steps</a></li><li><a href=#further-information>Further Information</a></li><li><a href=#owner>Owner</a></li></ul></nav></div><div></div></aside></div><div id=footer class="pt-2 pb-3 bg-white text-center"></div></div><div class="container-lg bg-white h-50">&nbsp;</div><div class=footer-container-wrapper><div class=footer-image><a href=https://container-solutions.com><img src=https://containersolutions.github.io/runbooks/images/logo-main.svg class=hs-image-widget style=width:120px;border-width:0;border:0 width=120 alt=logo-main title=logo-main></a></div><div>Runbooks is sponsored by <a href=https://container-solutions.com>Container Solutions</a>. We bring culture, strategy, and technology together<br>&mdash;to make sure your Cloud Native migration is done right. <a href=https://www.container-solutions.com>See how we can help</a></div></div><div class="bg-white h-10"><div class="text-small text-gray credits">Powered by the
<a href=https://github.com/qqhann/hugo-primer class=link-gray-dark>Hugo-Primer</a> theme for
<a href=https://gohugo.io class=link-gray-dark>Hugo</a>.</div></div></body></html>