<!doctype html><html><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-N2WWDBK5SV"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-N2WWDBK5SV')</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>No Route to Host &ndash; Runbooks</title><meta name=description property="og:description" content="Errors that contain the phrase &amp;lsquo;no route to host&amp;rsquo;|"><meta name=apple-mobile-web-app-title content="Runbooks"><link rel=stylesheet href=/runbooks/assets/syntax.css><link rel=stylesheet href=/runbooks/assets/primer-build.css><link rel=stylesheet href=/runbooks/assets/style.css><link rel=stylesheet href=https://containersolutions.github.io/runbooks/custom_style.899dd13784115b34654e51c818307a0a.css></head><body class=bg-gray><div id=holy class="container-lg bg-white h-100"><div id=header class="px-1 bg-white"><nav class="UnderlineNav UnderlineNav--right px-2"><a class="UnderlineNav-actions muted-link h2" href=https://containersolutions.github.io/runbooks/>Runbooks</a><div class="pseudo-menu-item text-gray"><div class=pseudo-flex-item><span class=pseudo-nav-item><a href=https://github.com/containersolutions/runbooks/edit/master/content/posts/networking/no-route-to-host.md class=edit-link><svg aria-hidden="true" height="16" role="img" viewBox="0 0 14 16" width="14" class="pencil"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996.0 011.41.0l1.59 1.59c.39.39.39 1.02.0 1.41z"/></svg>&nbsp;
Improve this page</a></span></div></div><div class=UnderlineNav-body><div class="flex-column position-relative dropdown"><span class=UnderlineNav-item>Nav Menu</span><div class="Box Box--condensed position-absolute dropdown-content"><div class=Box-body><a href=/runbooks/>Home</a></div><div class=Box-body><a href=/runbooks/posts/kubernetes/>Kubernetes</a></div><div class=Box-body><a href=/runbooks/posts/linux/>Linux</a></div><div class=Box-body><a href=/runbooks/posts/networking/>Networking</a></div><div class=Box-body><a href=/runbooks/posts/python/>Python</a></div><div class=Box-body><a href=/runbooks/posts/how-to/>How-Tos</a></div><div class=Box-body><a href=/runbooks/posts/golang/>Go</a></div></div></div></div></nav></div><div role=main id=main class="holy-main markdown-body px-4 bg-white"><div class=Subhead><div class=Subhead-heading><div class="h1 mt-3 mb-1">No Route to Host</div></div><div class=Subhead-description><div class=float-md-right><span title="Lastmod: 2023-01-26. Published at: 0001-01-01.">Lastmod: 2023-01-26</span></div></div></div><article><section class="pb-6 mb-3 border-bottom"><h2 id=overview>Overview</h2><p>This issue happens when a network request is attempted to a remote host, and an error is thrown containing the phrase <code>No route to host</code>, or the error code <code>EHOSTUNREACH</code>.</p><h2 id=check-runbook-match>Check RunBook Match</h2><p>This runbook is limited to Linux hosts, although some steps may help trigger productive investigations on other OSes.</p><h2 id=initial-steps-overview>Initial Steps Overview</h2><ol><li><p><a href=#step-1>Gather information</a></p></li><li><p><a href=#step-2>Is host up?</a></p></li><li><p><a href=#step-3>Is the port open?</a></p></li><li><p><a href=#step-4>Check IPTables / NetFilter</a></p></li><li><p><a href=#step-5>Check routing tables</a></p></li><li><p><a href=#step-6>Check intervening firewalls</a></p></li></ol><h2 id=detailed-steps>Detailed Steps</h2><h3 id=step-1>1) Gather information</h3><h4 id=step-1-1>1.1) Determine the host</h4><p>Determine the host (or IP) you are trying to reach.</p><p>From here, this host will be referred to as <code>[HOST|IP]</code>.</p><h4 id=step-1-2>1.2) Determine the IP</h4><p>Once you have the hostname, then you can determine the IP address by running:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>host <span style=color:#f92672>[</span>HOST<span style=color:#f92672>]</span>
</code></pre></div><p>which outputs, eg:</p><pre><code>[HOST] has address 151.101.0.81
[HOST] has address 151.101.128.81
[HOST] has address 151.101.64.81
[HOST] has address 151.101.192.81
[...]
</code></pre><p>You can take the first address returned as the IP to use, eg for the above output, <code>151.101.0.81</code> would be the IP.</p><p>If you can find out the &lsquo;correct&rsquo; IP that you are trying to reach by some means independent from your machine, do so. This might involve contacting another user, or figuring out the IP address by introspecting on the host.</p><h4 id=step-1-3>1.3) Determine the port</h4><p>Determine the port you are trying to reach.</p><p>If this is a &lsquo;standard&rsquo; web request, then the port is either 80 (for http requests) or 443 (for https requests).</p><p>If the web request hits a non-standard port, then you will see <code>:[NUMBER]</code> in the URL, eg:</p><pre><code>https://example.com:8443/path/to/site
</code></pre><p>would mean you are trying to contact port <code>8443</code>.</p><p>This will be referred to subsequently as <code>[PORT]</code>.</p><h4 id=step-1-4>1.4) Determine the frequency of the problem</h4><p>Try and work out if the problem happens every time, or is intermittent.</p><p>If it&rsquo;s intermittent, consider whether there are multiple hosts that could be ultimately reached by the request (eg behind a load balancer), and whether one of these hosts is faulty.</p><h3 id=step-2>2) Is host up?</h3><p>Check whether the host you are trying to reach is up.</p><h3 id=step-2-1>2.1) Use <code>nmap</code></h3><p>Run:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>nmap <span style=color:#f92672>[</span>HOST|IP<span style=color:#f92672>]</span>
</code></pre></div><p>If you see output that begins like this:</p><pre><code>Starting Nmap 7.80 ( https://nmap.org ) at 2020-06-19 10:11 BST
</code></pre><p>then you have <code>nmap</code> installed. If you don&rsquo;t then you will need to install it. Wait for the command to return.</p><p>If you see a message in output like:</p><pre><code>Failed to resolve &quot;[HOST|IP]&quot;.
</code></pre><p>then this is a DNS lookup failure. See the <a href=/runbooks/posts/networking/dns-lookup-failure/>DNS Lookup Failure</a> runbook.</p><p>If you see output that mentions <code>Host is up</code>, like this:</p><pre><code>Nmap scan report for [HOST] ([IP])
Host is up (0.016s latency).
Other addresses for [HOST] (not scanned): [IP2] [IP3]
Not shown: 998 filtered ports
PORT    STATE SERVICE
80/tcp  open  http
443/tcp open  https

Nmap done: 1 IP address (1 host up) scanned in 11.20 seconds
</code></pre><p>then the host you are trying to contact is up.</p><h3 id=step-2-2>2.2) Use ping</h3><p>If you can not install <code>nmap</code>, then you can try to <code>ping</code> the host:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>ping <span style=color:#f92672>[</span>HOST|IP<span style=color:#f92672>]</span>
</code></pre></div><h3 id=step-2-3>2.3) Use <code>nmap</code> on the IP</h3><p>If you are certain of the IP you are trying to connect to, you can try using <code>nmap</code> to access that host directly as per <a href=#step-2-1>step 2.1</a>. If the output differs from that of <a href=#step-2-1>step 2.1</a>, then you may have an issue with DNS lookup for the host not returning the correct IP address.</p><p>If you do, then this is likely due to a DNS server local to your network being misconfigured. Correcting this is outside the scope of this runbook, and will likely require you to contact the person responsible for that DNS server.</p><h3 id=step-3>3) Is the port open?</h3><p>There are two ways of determining this - from the client host and from the remote host.</p><h4 id=step-3-1>3.1) From client</h4><p>Run this command, and check the output:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>telnet <span style=color:#f92672>[</span>HOST|IP<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>PORT<span style=color:#f92672>]</span>
</code></pre></div><p>If the command hangs with output like:</p><pre><code>Trying 151.101.64.81...
</code></pre><p>then you can only say that the connection is not being explicitly rejected by the remote host. Where the connection is being stopped/dropped is impossible to say. It could be:</p><ul><li><p>by a local firewall</p></li><li><p>by an intervening host/firewall</p></li><li><p>by the remote host&rsquo;s firewall</p></li></ul><p>If the request returns with a message like:</p><pre><code>telnet: Unable to connect to remote host: Connection refused
</code></pre><p>then the request reached a remote host, and was explicitly refused.</p><p>If you connect, with a response like this:</p><pre><code>Trying 151.101.0.81...
Connected to [HOST]
Escape character is '^]'.
</code></pre><p>Then the issue appears to be resolved. If your application is still having the same problem, then check the IP address it is trying to reach matches the IP address above.</p><h4 id=step-3-2>3.2) From remote host</h4><p>There are several ways to determine whether a given port is open on your host.</p><ul><li><code>netstat</code></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>netstat -ln | grep -w tcp | grep -w <span style=color:#f92672>[</span>PORT<span style=color:#f92672>]</span>
</code></pre></div><p>If the output looks like this:</p><pre><code>tcp        0      0 0.0.0.0:[PORT]          0.0.0.0:*               LISTEN
</code></pre><p>then the port is open on <em>all</em> network interfaces (that&rsquo;s what <code>0.0.0.0</code> means). If you see another set of numbers in place of the <code>0.0.0.0:[PORT]</code>, then .
Similarly, if you see something else in place of the <code>0.0.0.0:*</code> (the &lsquo;Foreign Address&rsquo;), then the port may not be accessible only to clients from specific IP addresses. For example, if you see <code>127.0.0.1:*</code> then it is only accessible from the localhost (using any port).</p><ul><li><code>ss</code></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>ss -ln | grep -w tcp | grep -w <span style=color:#f92672>[</span>PORT<span style=color:#f92672>]</span>
</code></pre></div><p>Which produces similar output:</p><pre><code>tcp                LISTEN              0                    128                                                                                         0.0.0.0:22                                    0.0.0.0:*
</code></pre><ul><li>telnet</li></ul><p>You can try connecting direct to the port using telnet, as per <a href=#step-3-1>step 3.1</a>. However be aware that this just proves that you can connect from the same host (see notes on interfaces in this section above).</p><h4 id=step-3-3>3.3) Conclusions</h4><p>If:</p><ul><li><p>the port appears to be open from the point of view of the remote host</p></li><li><p>the port appears to be closed from the point of view of the client</p></li></ul><p>this suggests that there is an intervening firewall that is blocking requests from reaching the server.</p><p>The firewall may be on the remote host.</p><h3 id=step-4>4) Check IPTables / NetFilter</h3><p>First, if you want to (optionally) know whether you are using IPTables or NetFilter, go <a href=/runbooks/posts/how-to/determine-using-iptables-or-netfilter/>here</a>.</p><p>To determine your IPTables/NetFilter rules and whether they affect your port or host, run <em>as root</em>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>iptables -S | grep -w <span style=color:#f92672>[</span>PORT<span style=color:#f92672>]</span>
iptables -S | grep -w <span style=color:#f92672>[</span>IP<span style=color:#f92672>]</span>
iptables -S | grep -w <span style=color:#f92672>[</span>HOST<span style=color:#f92672>]</span>
</code></pre></div><p>If any lines match, then IPTables <em>may</em> be blocking or redirecting your attempts to connect to the remote server.</p><p>Understanding IPTables more deeply to fully debug this is outside the scope of this article. There are many resources on the web that attempt to explain it for various levels of experience.</p><h3 id=step-5>5) Check routing tables</h3><p>At this point, you may want to consider whether your routing tables are misconfigured.</p><p>This command gives a list of your machine&rsquo;s routes:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>ip route
</code></pre></div><p>If the <code>ip</code> command is unavailable, try <code>route</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>route
</code></pre></div><p>Determining whether the routing tables are correctly configured requires more network knowledge than can be reasonably placed here, and likely some knowledge of the local network topology.</p><p>There are many good resources on the internet for this, see <a href=#further-information>Further Information</a> below for links.</p><h3 id=step-6>6) Check intervening firewalls</h3><p>At this point you&rsquo;ve checked connectivity at your client machine and the server. Now it is worth considering whether there is an intervening firewall between client and server blocking the connection.</p><ul><li>Local firewall (ie on way out)</li></ul><p>We have already considered IPTables/NetFilter, but it is possible that there is some other kind of firewall running on your host that is preventing egress.</p><ul><li>If you are using AWS, or any other cloud provider&mldr;</li></ul><p>then consider whether there are network rules set up to prevent egress. On AWS these come in the form of &lsquo;Security Groups&rsquo; and &lsquo;Network ACLs&rsquo;.</p><ul><li>External/3rd party firewall</li></ul><p>Any number of firewalls/hosts may be relaying your request to the destination host. Any of these may be blocking the request from going further.</p><p>Using <code>traceroute</code> might be considered at this point to determine which (and how many) hosts are being hit may help you debug further. See <a href=https://en.wikipedia.org/wiki/Traceroute>here</a> for more background on this tool.</p><h2 id=check-resolution>Check Resolution</h2><p>If the application no longer reports this error, then this issue is resolved.</p><h2 id=further-steps>Further Steps</h2><p>None.</p><h2 id=further-information>Further Information</h2><p>This error originates from the Linux kernel, eg in:</p><pre><code>net/9p/error.c:114:     {&quot;No route to host&quot;, EHOSTUNREACH},
</code></pre><p>It can be thrown within the kernel for a number of different reasons, which makes interpreting the error tricky.</p><p><a href=https://geek-university.com/ccna/routing-table-explained/>Routing tables</a></p><h2 id=owner>Owner</h2><p><a href=https://github.com/ianmiell>Ian Miell</a></p></section><section><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//runbooks.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></article></div><div id=side class="pr-1 bg-white"><aside class=pr-3><div id=toc class="Box Box--blue mb-3"><b>No Route to Host</b><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#check-runbook-match>Check RunBook Match</a></li><li><a href=#initial-steps-overview>Initial Steps Overview</a></li><li><a href=#detailed-steps>Detailed Steps</a><ul><li><a href=#step-1>1) Gather information</a></li><li><a href=#step-2>2) Is host up?</a></li><li><a href=#step-2-1>2.1) Use <code>nmap</code></a></li><li><a href=#step-2-2>2.2) Use ping</a></li><li><a href=#step-2-3>2.3) Use <code>nmap</code> on the IP</a></li><li><a href=#step-3>3) Is the port open?</a></li><li><a href=#step-4>4) Check IPTables / NetFilter</a></li><li><a href=#step-5>5) Check routing tables</a></li><li><a href=#step-6>6) Check intervening firewalls</a></li></ul></li><li><a href=#check-resolution>Check Resolution</a></li><li><a href=#further-steps>Further Steps</a></li><li><a href=#further-information>Further Information</a></li><li><a href=#owner>Owner</a></li></ul></nav></div><div></div></aside></div><div id=footer class="pt-2 pb-3 bg-white text-center"></div></div><div class="container-lg bg-white h-50">&nbsp;</div><div class=footer-container-wrapper><div class=footer-image><a href=https://container-solutions.com><img src=https://containersolutions.github.io/runbooks/images/logo-main.svg class=hs-image-widget style=width:120px;border-width:0;border:0 width=120 alt=logo-main title=logo-main></a></div><div>Runbooks is sponsored by <a href=https://container-solutions.com>Container Solutions</a>. We bring culture, strategy, and technology together<br>&mdash;to make sure your Cloud Native migration is done right. <a href=https://www.container-solutions.com>See how we can help</a></div></div><div class="bg-white h-10"><div class="text-small text-gray credits">Powered by the
<a href=https://github.com/qqhann/hugo-primer class=link-gray-dark>Hugo-Primer</a> theme for
<a href=https://gohugo.io class=link-gray-dark>Hugo</a>.</div></div></body></html>